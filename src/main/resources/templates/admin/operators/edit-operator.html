<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактировать клиента</title>
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/css/c_operator.css}">
</head>
<body>
<div class="area">
    <!-- Включение фрагмента меню -->
    <div th:replace="~{fragments/menu :: nav}"></div>
    <div class="content">
        <h1>Редактировать клиента</h1>
        <div class="content-center">
            <form th:action="@{/admin/operators/edit}" th:object="${operatorDto}" method="post">
                <!-- Форма для редактирования клиента -->
                <input type="hidden" th:field="*{id}">
                <div class="form__item">
                    <label for="firstName" class="form__label">Имя:</label>
                    <input type="text" id="firstName" name="firstName" class="form__input" th:field="*{firstName}"
                           required>
                    <span class="form__error" th:if="${#fields.hasErrors('firstName')}"
                          th:errors="*{firstName}"></span>
                </div>
                <div class="form__item">
                    <label for="lastName" class="form__label">Фамилия:</label>
                    <input type="text" id="lastName" name="lastName" class="form__input" th:field="*{lastName}"
                           required>
                    <span class="form__error" th:if="${#fields.hasErrors('lastName')}"
                          th:errors="*{lastName}"></span>
                </div>

                <div class="form__item">
                    <label for="dateOfBirth" class="form__label">Дата рождения:(неизменяемая)</label>
                    <input type="text" id="dateOfBirth" class="form__input" th:value="${#temporals.format(operatorDto.dateOfBirth, 'dd.MM.yyyy')}" readonly>
                    <input type="hidden" th:field="*{dateOfBirth}">
                </div>

                <div class="form__item">
                    <label for="email" class="form__label">Email:</label>
                    <input type="email" id="email" name="email" class="form__input" th:field="*{email}">
                    <span class="form__error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
                </div>

                <div class="form__item">
                    <label for="phoneNumber" class="form__label">Телефон:</label>
                    <input type="text" id="phoneNumber" name="phoneNumber" class="form__input" th:field="*{phone}"
                           placeholder="+7-000-000-00-00" required>
                    <span class="form__error" th:if="${#fields.hasErrors('phone')}"
                          th:errors="*{phone}"></span>
                </div>

                <div class="form__item">
                    <label for="address" class="form__label">Адрес:</label>
                    <input type="text" id="address" name="address" class="form__input" th:field="*{address}"
                           required>
                    <span class="form__error" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></span>
                </div>

                <div class="form__item">
                    <label for="workPhone" class="form__label">Назначить рабочий телефон</label>
                    <select id="workPhone" name="selectedPhoneId" >
                        <option th:value="${activePhoneId}" th:text="${'текущий: ' + (activePhoneSeries.isEmpty() ? 'не выбран' : activePhoneSeries)}">Телефон</option>
                        <th:block th:if="${activePhoneId > 0}">
                            <option  value="0" th:text="${'отвязать: ' + activePhoneSeries}">Отвязать</option>
                        </th:block>

                        <!-- Если есть телефоны -->
                        <th:block th:if="${!phones.isEmpty()}">
                            <th:block th:each="ph : ${phones}">
                                <option th:value="${ph.id}" th:text="${ph.serialNumber}"></option>
                            </th:block>
                        </th:block>

                        <!-- Если телефонов нет -->
                        <th:block th:if="${#lists.isEmpty(phones)}">
                            <option disabled>Свободных телефонов нет</option>
                        </th:block>
                    </select>
                </div>

                <input type="hidden" th:value="${activePhoneId}" name="oldPhoneId">

                <div class="block_btn">
                    <input type="submit" value="Сохранить" class="form__btn"/>
                </div>
            </form>
        </div>
    </div>
</div>

<script th:src="@{/js/expande.js}"></script>
</body>
</html>